<head>
  <style>
    @page {
      size: a4 portrait;
      @frame header_frame {           /* Static Frame */
          -pdf-frame-content: header_content;
          left: 50pt; width: 512pt; top: 20pt; height: 40pt;
      }
      @frame content_frame {          /* Content Frame */
          left: 50pt; width: 492pt; top: 60pt; height: 700pt;
      }
      @frame footer_frame {           /* Another static Frame */
          -pdf-frame-content: footer_content;
          left: 50pt; width: 512pt; top: 780pt; height: 20pt;
      }
    }
    *{
      box-sizing: border-box;
      padding: 0;
      margin: 0;
    }
    body{
      font-size: 14px;
      line-height: 1.5px;
    }
    itens th, itens td{
      padding: 4px;
      text-align: center;
      border: 1.5px solid #000;
    }

    itens,h2{
      margin-top: 2rem;
    }
    h2{
      padding-bottom: 3px;
    }

  </style>
  </head>
  <body>
      <!-- Content for Static Frame 'header_frame' -->
      <header id="header_content">
        {% include "pdf/header.html" %}
      </header>

      <!-- Content for Static Frame 'footer_frame' -->
      <div id="footer_content">Página <pdf:pagenumber>
          de <pdf:pagecount>
      </div>

      <!-- HTML Content -->
      <div style="border: 1.5px solid #000; text-align:center;">
        <h1 style="font-size: 16px; font-weight: 600; padding: 10px;">
          RELATÓRIO SEMANAL DE &nbsp;{{monday|date:"SHORT_DATE_FORMAT"}}&nbsp; A &nbsp;{{friday|date:"SHORT_DATE_FORMAT"}}&nbsp;
        </h1>
      </div>

      <h2>INSTITUIÇÃO</h2>

      <itens>
        {% for order in orders %}
        <h4>{{order.institution}} - Pedido #{{order.id}} (Status: {{order.get_status_display}})</h4>
        <table>
          <thead>
            <tr>
              <th style="background-color: #ddd">PRODUTO</th>
              <th style="background-color: #ddd">QUANTIDADE</th>
            </tr>
          </thead>
          <tbody>
            {% for ordered_product in order.products.all %}
            <tr>
                <td>
                  {% if ordered_product.call_product and ordered_product.call_product.product %}
                    {{ ordered_product.call_product.product.name }}
                  {% else %}
                    Produto
                  {% endif %}
                </td>
                <td>
                  {% if ordered_product.status == 'available' %}
                    {{ ordered_product.ordered_quantity }}  {{ ordered_product.call_product.product.unit }}
                  {% elif ordered_product.status == 'parcial' %}
                    {{ ordered_product.available_quantity }}  {{ ordered_product.call_product.product.unit }}
                  {% elif ordered_product.status == 'pending' %}
                    {{ ordered_product.ordered_quantity }}  {{ ordered_product.call_product.product.unit }}
                  {% elif ordered_product.status == 'denied' %}
                    NEGADO
                  {% endif %}
                </td>
              </tr>
            {% endfor %}

          </tbody>
        </table>
        <br>
        {% empty %}
        <i>&nbsp;SEM INSTITUIÇÔES</i>
        {% endfor %}
      </itens>
      <p align="right">* O Relatório inclui Pedidos <strong>Pendentes</strong>, <strong>Aprovados</strong> e <strong>Entregues</strong>.</p>

  </body>
  </html>